<Window x:Class="RevitProjectDataAddin.柱配置リスト"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        Title="柱配置リスト"
        Width="1150"
        Height="Auto"
        FontFamily="Yu Mincho"
        Background="White"
         ResizeMode="NoResize">

    <!-- Định nghĩa màu sắc -->
    <Window.Resources>
        <SolidColorBrush x:Key="TitleColor1" Color="Blue"/>
        <SolidColorBrush x:Key="TitleColor2" Color="Orange"/>
        <SolidColorBrush x:Key="Label"      Color="Green"/>
        <SolidColorBrush x:Key="注意"       Color="Red"/>
    </Window.Resources>

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="10">
                <Grid Margin="10">

                    <!-- Hai cột bằng nhau -->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <!-- 5 hàng auto -->
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Tiêu đề chính -->
                    <TextBlock Text="柱配置"
                   FontSize="30"
                   Grid.ColumnSpan="2"
                   Margin="0,0,0,20"
                   HorizontalAlignment="Center"/>

                    <StackPanel Orientation="Vertical" Margin="0,0,0,0"  Grid.Row="1">
                                <!-- Lựa chọn 階 -->
                            <TextBlock Text="階を選択"
                           Grid.Column="0"
                           FontSize="18"
                           VerticalAlignment="Center"/>
                            <ComboBox  x:Name="階を選択ComboBox"
                          Grid.Column="0"
                          Margin="0,0,20,0"
                          FontSize="18"
                          Height="32"                    
                             SelectedItem="{Binding 階を選択, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectionChanged="ComboBox_SelectionChanged" />
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Margin="0,0,0,0" Grid.Row="1"  Grid.Column="1">
                        <!-- Lựa chọn 通 -->
                            <TextBlock Text="通を選択"
                           Grid.Column="1"
                           FontSize="18"
                           VerticalAlignment="Center"/>
                            <ComboBox  x:Name="通を選択ComboBox"
                          Grid.Column="1"
                          Margin="0,0,20,0"
                          FontSize="18"
                          Height="32"   
                                   
                             SelectedItem="{Binding 通を選択, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectionChanged="ComboBox_SelectionChanged" />
                    </StackPanel>

                    <!-- Hướng dẫn nhập liệu -->
                    <TextBlock Text="階・通りに対して柱の「符号・ズレ寸法」を入力"
                   Grid.Row="2"
                   Grid.ColumnSpan="2"
                   FontSize="20"
                   Foreground="{StaticResource TitleColor1}"
                   Margin="0,20,0,10"/>

                    <!-- Container để đổ các StackPanel động -->
                    <Border Grid.Row="3" Grid.ColumnSpan="2"
                BorderBrush="Silver"
                BorderThickness="1"
                Padding="10"
                Background="White">
                        <StackPanel x:Name="StackPanelContainer"
                      Orientation="Vertical"
                      Margin="0">
                            <ItemsControl ItemsSource="{Binding BeamSegments}" Margin="10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="10">

                                        <StackPanel>
                                            <!-- Tiêu đề -->
                                                <TextBlock FontSize="18" Text="{Binding 位置表示, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  />

                                            <StackPanel Orientation="Horizontal" Margin="50,10,0,0">
                                                <!-- Left: ComboBox + 4 TextBox -->
                                                <StackPanel Orientation="Vertical" >
                                                    <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                                                        <TextBlock FontSize="18" Text="柱の符号"/>
                                                        <ComboBox ItemsSource="{Binding DataContext.ColumnNames, 
                                                             RelativeSource={RelativeSource AncestorType=Window}}"
                                                            SelectedItem="{Binding 柱の符号, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                            FontSize="18"
                                                            Height="32"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                                        <StackPanel  Orientation="Vertical" Margin="0,0,0,0">
                                                            <TextBlock Text="上側のズレ寸法"  FontSize="18"/>
                                                                <TextBox Text="{Binding 上側のズレ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  FontSize="18" Height="26" PreviewTextInput="NumberTextBox_PreviewTextInput1"/>

                                                            <TextBlock Text="下側のズレ寸法" FontSize="18"/>
                                                                <TextBox Text="{Binding 下側のズレ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  FontSize="18" Height="26" PreviewTextInput="NumberTextBox_PreviewTextInput1"/>
                                                        </StackPanel>


                                                        <StackPanel  Orientation="Vertical" Margin="20,0,0,0">
                                                        
                                                            <TextBlock Text="左側のズレ寸法" FontSize="18"/>
                                                                <TextBox Text="{Binding 左側のズレ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  FontSize="18" Height="26" PreviewTextInput="NumberTextBox_PreviewTextInput1"/>

                                                            <TextBlock Text="右側のズレ寸法" FontSize="18"/>
                                                                <TextBox Text="{Binding 右側のズレ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  FontSize="18" Height="26" PreviewTextInput="NumberTextBox_PreviewTextInput1"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                    
                                                </StackPanel>

                                                <!-- Right: Canvas -->
                                                    <Canvas  DataContext="{Binding}" Width="400" Height="200" Margin="0,0,0,20"
                                                        Loaded="Canvas_Loaded"/>
                                            </StackPanel>

                                            
                                        </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
